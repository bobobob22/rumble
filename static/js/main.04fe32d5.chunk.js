(this["webpackJsonprumble-app"]=this["webpackJsonprumble-app"]||[]).push([[0],{23:function(n,e,t){n.exports=t(36)},35:function(n,e,t){},36:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),c=t(15),i=t.n(c),o=t(2),u=(t(28),t(5)),l=t.n(u),s=t(7),m=t(6),d="https://simple-rumble-backend.herokuapp.com/movies",f=t(16),p=t(21),v=t(22),b=t(3),h=t(17);function g(){var n=Object(b.a)(["\n  cursor: pointer;\n"]);return g=function(){return n},n}var j=Object(o.c)(h.a)(g()),x=function(n){var e=n.icon,t=n.color,r=n.onClick;return a.a.createElement(j,{icon:e,size:"3x",color:t,onClick:r})};function E(){var n=Object(b.a)(["\n  margin-top: 1rem;\n  font-style: italic;\n"]);return E=function(){return n},n}function O(){var n=Object(b.a)(["\n  display: flex;\n  justify-content: space-around;\n  width: 100%;\n  margin-top: auto;\n  margin-bottom: 30px;\n"]);return O=function(){return n},n}function k(){var n=Object(b.a)(["\n  width: 100%;\n"]);return k=function(){return n},n}function w(){var n=Object(b.a)(["\n  max-width: 200px;\n"]);return w=function(){return n},n}function y(){var n=Object(b.a)(["\n   text-align: center;\n   margin-top: 2rem;\n   margin-bottom: 1rem;\n   font-size: 1.2rem;\n"]);return y=function(){return n},n}function C(){var n=Object(b.a)(["\n  padding: 10px;\n  max-width: 90%;\n  height: 90%;\n  width: 100%;\n  border: 1px solid #000;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return C=function(){return n},n}function T(){var n=Object(b.a)(["\n  width: 100%;\n  max-width: 100%;\n  max-height: 100%;\n  height: 100vh;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto;\n  \n  "," {\n    max-width: 500px;\n    max-height: 600px;\n  }\n"]);return T=function(){return n},n}var M=o.c.div(T(),(function(n){return n.theme.color.main}),(function(n){return n.theme.breakpoints.up("md")})),R=o.c.div(C()),S=o.c.h2(y()),X=o.c.div(w()),F=o.c.img(k()),I=o.c.div(O()),P=o.c.p(E()),N=Object(o.d)((function(n){var e=n.theme,t=n.movie,r=n.handleRejectMovie,c=n.handleAcceptMovie,i=t.imageURL,o=t.title,u=t.summary,l=t.rating;return a.a.createElement(M,null,a.a.createElement(R,null,a.a.createElement(S,null,"".concat(o," ").concat(l," / 10")),a.a.createElement(X,null,a.a.createElement(F,{src:i,alt:o})),a.a.createElement(P,null,u),a.a.createElement(I,null,a.a.createElement(x,{icon:p.faTimesCircle,color:e.color.error,onClick:r}),a.a.createElement(x,{icon:v.faCheckCircle,color:e.color.active,onClick:c}))))})),V=t(4),z=function(n){var e=n.index,t=n.pos,r=n.numItems;return e-t<0?r-Math.abs(e-t):e-t},B={pos:5,sliding:!1,dir:"NEXT"};function _(n,e){switch(console.log("state",n,"action",e),e.type){case"reset":return B;case"PREV":return Object(V.a)(Object(V.a)({},n),{},{dir:"PREV",sliding:!0,pos:n.pos===e.numItems-1?0:n.pos+1});case"NEXT":return Object(V.a)(Object(V.a)({},n),{},{dir:"NEXT",sliding:!0,pos:n.pos===e.numItems-1?0:n.pos+1});case"stopSliding":return Object(V.a)(Object(V.a)({},n),{},{sliding:!1});default:return n}}function A(){var n=Object(b.a)(["\n  flex: 1 0 100%;\n  flex-basis: 100%;\n  order: ",";\n"]);return A=function(){return n},n}function D(){var n=Object(b.a)(["\n  display: flex;\n  transition: ",";\n\n  transform: ",";\n"]);return D=function(){return n},n}function J(){var n=Object(b.a)(["\n  overflow: hidden;\n  width: 100%;\n"]);return J=function(){return n},n}function L(){var n=Object(b.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n\n  "," {\n    max-width: 800px;\n    margin: 0 auto;\n    background: rgba(0,0,0,0.15);\n  }\n"]);return L=function(){return n},n}var U=o.c.div(L(),(function(n){return n.theme.breakpoints.up("md")})),q=o.c.div(J()),G=o.c.div(D(),(function(n){return n.sliding?"none":"transform .3s ease-in"}),(function(n){return n.sliding?"NEXT"===n.dir?"translateX(calc(2 * (-100%)))":"translateX(0%)":"translateX(calc(-100%))"})),H=o.c.div(A(),(function(n){return n.order})),K=function(n){var e=Object(r.useContext)(Y),t=e.loading,c=e.movies,i=c&&c.movies&&c.movies.length,o=a.a.useReducer(_,B),u=Object(m.a)(o,2),p=u[0],v=u[1],b=Object(r.useState)(0),h=Object(m.a)(b,2),g=h[0],j=h[1],x=function(){var n=Object(s.a)(l.a.mark((function n(e,t){var r,a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("".concat(d,"/reccomendations/").concat(e,"/").concat(t),{method:"PUT"});case 3:return r=n.sent,n.next=6,r.json();case 6:(a=n.sent)&&console.log("responseData",a),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log("error",n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}(),E=c&&c.movies&&c.movies.length,O=i&&c.movies.length===g,k=function(n){v({type:n,numItems:E}),setTimeout((function(){v({type:"stopSliding"})}),50)},w=Object(f.a)({onSwipedLeft:function(){j((function(){return g+1})),k("PREV")},onSwipedRight:function(){return k("stopSliding")},preventDefaultTouchmoveEvent:!0,trackMouse:!0});return t?a.a.createElement("p",null,"Movies are loading..."):i?a.a.createElement(U,null,O?a.a.createElement("p",null,"There is no more movies in our database..."):a.a.createElement(q,w,a.a.createElement(G,{dir:p.dir,sliding:p.sliding},i&&c.movies.map((function(n,e){var t=e===g;return a.a.createElement(H,{key:n._id,order:z({index:e,pos:p.pos,numItems:E})},a.a.createElement(N,{movie:n,handleRejectMovie:function(){return e=n._id,k("PREV"),j((function(){return g+1})),void x(e,"reject");var e},handleAcceptMovie:function(){return e=n._id,k("NEXT"),j((function(){return g+1})),void x(e,"accept");var e},isMovieVisible:t}))}))))):null};function Q(){var n=Object(b.a)(["\n  * {\n    padding: 0;\n    margin: 0;\n  }\n"]);return Q=function(){return n},n}var W=Object(o.b)(Q()),Y=a.a.createContext([[],function(){}]),Z=function(){var n=Object(r.useState)([]),e=Object(m.a)(n,2),t=e[0],c=e[1],i=Object(r.useState)(!1),o=Object(m.a)(i,2),u=o[0],f=o[1];Object(r.useEffect)((function(){p()}),[]);var p=function(){var n=Object(s.a)(l.a.mark((function n(){var e,t;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f(!0),n.prev=1,n.next=4,fetch("".concat(d,"/all"));case 4:return e=n.sent,n.next=7,e.json();case 7:(t=n.sent)&&c((function(){return t})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),console.log("error",n.t0);case 14:f(!1);case 15:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(){return n.apply(this,arguments)}}();return a.a.createElement(Y.Provider,{value:{loading:u,movies:t}},a.a.createElement(K,{"data-testid":"app"}),a.a.createElement(W,null))},$={color:{main:"#F0F2F5",greyBg:"#F5F6FB",error:"#EC4E4F",active:"#65CC94"},zIndex:{modal:99999},breakpoints:{values:{sm:576,md:768,lg:991,xl:1200},up:function(n){var e=$.breakpoints.values[n];return"@media all and (min-width: ".concat(e,"px)")}}};t(35);i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(o.a,{theme:$},a.a.createElement(Z,null))),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.04fe32d5.chunk.js.map