{"version":3,"sources":["settings.ts","components/IconButton/styles.ts","components/IconButton/IconButton.tsx","components/Movie/styles.ts","components/Movie/Movie.tsx","components/MoviesList/helpers.ts","components/MoviesList/reducer.ts","components/MoviesList/styles.ts","components/MoviesList/MoviesList.tsx","global-styles.ts","containers/App/App.tsx","theme/theme.ts","index.tsx"],"names":["apiUrl","Button","styled","FontAwesomeIcon","IconButton","icon","color","onClick","size","Root","div","props","theme","main","breakpoints","up","MovieWrapper","Title","h2","ImageWrapper","MovieImage","img","ButtonsWrapper","Summary","p","withTheme","movie","handleRejectMovie","handleAcceptMovie","imageURL","title","summary","rating","src","alt","faTimesCircle","error","faCheckCircle","active","getOrder","index","pos","numItems","Math","abs","initialState","sliding","dir","reducer","state","action","console","log","type","MoviesListWrapper","CarouselContainer","CarouselSlot","order","MoviesList","useContext","MoviesContext","loading","movies","areMoviesExists","length","React","useReducer","dispatch","useState","visibleMovieIndex","setVisibleMovieIndex","sendUserChoice","movieId","userChoice","a","fetch","method","data","json","responseData","moviesLimitHasAchiewed","slide","setTimeout","handlers","useSwipeable","onSwipedLeft","onSwipedRight","preventDefaultTouchmoveEvent","trackMouse","map","isMovieVisible","key","_id","GlobalStyle","createGlobalStyle","createContext","App","setMovies","setLoading","useEffect","loadMovies","Provider","value","data-testid","greyBg","zIndex","modal","values","sm","md","lg","xl","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.04fe32d5.chunk.js","sourcesContent":["export const apiUrl = 'https://simple-rumble-backend.herokuapp.com/movies';\n","import styled from 'styled-components';\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport const Button = styled(FontAwesomeIcon)`\n  cursor: pointer;\n`;\n","import React from 'react';\n\nimport { IconButtonProps } from './types';\nimport { Button } from './styles';\n\nconst IconButton: React.FC<IconButtonProps> = ({ icon, color, onClick }) => (\n  <Button icon={icon} size=\"3x\" color={color} onClick={onClick} />\n);\n\nexport default IconButton;\n","import styled from 'styled-components';\n\nexport const Root = styled.div`\n  width: 100%;\n  max-width: 100%;\n  max-height: 100%;\n  height: 100vh;\n  background: ${(props) => props.theme.color.main};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto;\n  \n  ${(props) => props.theme.breakpoints.up('md')} {\n    max-width: 500px;\n    max-height: 600px;\n  }\n`;\n\nexport const MovieWrapper = styled.div`\n  padding: 10px;\n  max-width: 90%;\n  height: 90%;\n  width: 100%;\n  border: 1px solid #000;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n\nexport const Title = styled.h2`\n   text-align: center;\n   margin-top: 2rem;\n   margin-bottom: 1rem;\n   font-size: 1.2rem;\n`;\n\nexport const ImageWrapper = styled.div`\n  max-width: 200px;\n`;\n\nexport const MovieImage = styled.img`\n  width: 100%;\n`;\n\nexport const ButtonsWrapper = styled.div`\n  display: flex;\n  justify-content: space-around;\n  width: 100%;\n  margin-top: auto;\n  margin-bottom: 30px;\n`;\n\nexport const Summary = styled.p`\n  margin-top: 1rem;\n  font-style: italic;\n`;\n","import React from 'react';\nimport { withTheme } from 'styled-components';\nimport { faTimesCircle } from '@fortawesome/free-regular-svg-icons/faTimesCircle';\nimport { faCheckCircle } from '@fortawesome/free-regular-svg-icons/faCheckCircle';\n\nimport IconButton from 'components/IconButton';\n\nimport { MovieProps } from './types';\nimport {\n  Root, MovieWrapper, Title, ImageWrapper, MovieImage, ButtonsWrapper, Summary,\n} from './styles';\n\nconst Movie: React.FC<MovieProps> = ({\n  theme, movie, handleRejectMovie, handleAcceptMovie,\n}) => {\n  const {\n    imageURL, title, summary, rating,\n  } = movie;\n\n  return (\n    <Root>\n      <MovieWrapper>\n        <Title>{`${title} ${rating} / 10`}</Title>\n        <ImageWrapper>\n          <MovieImage src={imageURL} alt={title} />\n        </ImageWrapper>\n        <Summary>\n          {summary}\n        </Summary>\n        <ButtonsWrapper>\n          <IconButton icon={faTimesCircle} color={theme.color.error} onClick={handleRejectMovie} />\n          <IconButton icon={faCheckCircle} color={theme.color.active} onClick={handleAcceptMovie} />\n        </ButtonsWrapper>\n      </MovieWrapper>\n    </Root>\n  );\n};\n\nexport default withTheme(Movie);\n","interface GetOrderProps {\n  index: number;\n  pos: number;\n  numItems: number;\n}\n\nexport const getOrder = ({ index, pos, numItems }: GetOrderProps): number => {\n  return index - pos < 0 ? numItems - Math.abs(index - pos) : index - pos;\n};\n\nexport const NEXT = 'NEXT';\nexport const PREV = 'PREV';\n","import { NEXT, PREV } from './helpers';\n\ntype State = {\n  pos: number;\n  sliding?: boolean;\n  dir?: string;\n}\n\ntype Action =\n  { type: 'stopSliding' }\n  | { type: 'PREV2' }\n  // eslint-disable-next-line @typescript-eslint/member-delimiter-style\n  | { type: 'reset', numItems: number }\n  // eslint-disable-next-line @typescript-eslint/member-delimiter-style\n  | { type: 'NEXT', numItems: number }\n  // eslint-disable-next-line @typescript-eslint/member-delimiter-style\n  | { type: 'PREV', numItems: number };\n\nexport const initialState = { pos: 5, sliding: false, dir: NEXT };\n\nexport function reducer(state: State, action: Action): State {\n  console.log('state', state, 'action', action);\n  switch (action.type) {\n    case 'reset':\n      return initialState;\n    case PREV:\n      return {\n        ...state,\n        dir: PREV,\n        sliding: true,\n        pos: state.pos === action.numItems - 1 ? 0 : state.pos + 1,\n      };\n    case NEXT:\n      return {\n        ...state,\n        dir: NEXT,\n        sliding: true,\n        pos: state.pos === action.numItems - 1 ? 0 : state.pos + 1,\n      };\n    case 'stopSliding':\n      return { ...state, sliding: false };\n    default:\n      return state;\n  }\n}\n","import styled from 'styled-components';\n\nimport { NEXT } from './helpers';\nimport { CarouselProps, CarouselSlotProps } from './types';\n\nexport const Root = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n\n  ${(props) => props.theme.breakpoints.up('md')} {\n    max-width: 800px;\n    margin: 0 auto;\n    background: rgba(0,0,0,0.15);\n  }\n`;\n\nexport const MoviesListWrapper = styled.div`\n  overflow: hidden;\n  width: 100%;\n`;\n\nexport const CarouselContainer = styled.div`\n  display: flex;\n  transition: ${(props: CarouselProps) => (props.sliding ? 'none' : 'transform .3s ease-in')};\n\n  transform: ${(props) => {\n    if (!props.sliding) return 'translateX(calc(-100%))';\n    if (props.dir === NEXT) return 'translateX(calc(2 * (-100%)))';\n    return 'translateX(0%)';\n  }};\n`;\n\nexport const CarouselSlot = styled.div`\n  flex: 1 0 100%;\n  flex-basis: 100%;\n  order: ${(props: CarouselSlotProps) => props.order};\n`;\n","import React, { useState, useContext } from 'react';\nimport { useSwipeable } from 'react-swipeable';\n\nimport { apiUrl } from 'settings';\n\nimport { MoviesContext } from 'containers/App';\nimport Movie from 'components/Movie';\n\nimport { reducer, initialState } from './reducer';\nimport { getOrder, NEXT, PREV } from './helpers';\nimport {\n  Root, MoviesListWrapper, CarouselContainer, CarouselSlot,\n} from './styles';\n\nconst MoviesList: React.FC = (props): React.ReactElement | null => {\n  const { loading, movies } = useContext(MoviesContext);\n  const areMoviesExists = movies && movies.movies && movies.movies.length;\n\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n  const [visibleMovieIndex, setVisibleMovieIndex] = useState<number>(0);\n\n  const handleRejectMovie = (movieId: number): void => {\n    slide(PREV);\n    setVisibleMovieIndex(() => visibleMovieIndex + 1);\n    sendUserChoice(movieId, 'reject');\n  };\n\n  const handleAcceptMovie = (movieId: number): void => {\n    slide(NEXT);\n    setVisibleMovieIndex(() => visibleMovieIndex + 1);\n    sendUserChoice(movieId, 'accept');\n  };\n\n  const sendUserChoice = async (movieId: number, userChoice: string): Promise<void> => {\n    try {\n      const data = await fetch(`${apiUrl}/reccomendations/${movieId}/${userChoice}`, {\n        method: 'PUT',\n      });\n      const responseData = await data.json();\n      if (responseData) {\n        console.log('responseData', responseData);\n      }\n    } catch (error) {\n      console.log('error', error);\n    }\n  };\n\n  const numItems: number = movies && movies.movies && movies.movies.length;\n\n  const handleSwipeLeft = (): void => {\n    setVisibleMovieIndex(() => visibleMovieIndex + 1);\n    slide(PREV);\n  };\n\n  const moviesLimitHasAchiewed = areMoviesExists && movies.movies.length === visibleMovieIndex;\n\n  const slide = (dir: 'reset' | 'NEXT' | 'PREV' | 'stopSliding'): void => {\n    dispatch({ type: dir, numItems });\n    setTimeout(() => {\n      dispatch({ type: 'stopSliding' });\n    }, 50);\n  };\n\n  const handlers = useSwipeable({\n    onSwipedLeft: handleSwipeLeft,\n    onSwipedRight: () => slide('stopSliding'),\n    preventDefaultTouchmoveEvent: true,\n    trackMouse: true,\n  });\n\n  if (loading) {\n    return <p>Movies are loading...</p>;\n  }\n\n  if (!areMoviesExists) {\n    return null;\n  }\n\n  return (\n    <Root>\n      {moviesLimitHasAchiewed ? (\n        <p>There is no more movies in our database...</p>\n      ) : (\n        <MoviesListWrapper {...handlers}>\n          <CarouselContainer dir={state.dir} sliding={state.sliding}>\n            {areMoviesExists && movies.movies.map((movie: any, index: any) => {\n              const isMovieVisible = index === visibleMovieIndex;\n              return (\n                <CarouselSlot\n                  // eslint-disable-next-line no-underscore-dangle\n                  key={movie._id}\n                  order={getOrder({ index, pos: state.pos, numItems })}\n                >\n                  <Movie\n                    movie={movie}\n                    // eslint-disable-next-line no-underscore-dangle\n                    handleRejectMovie={() => handleRejectMovie(movie._id)}\n                    // eslint-disable-next-line no-underscore-dangle\n                    handleAcceptMovie={() => handleAcceptMovie(movie._id)}\n                    isMovieVisible={isMovieVisible}\n                  />\n                </CarouselSlot>\n              );\n            })}\n          </CarouselContainer>\n        </MoviesListWrapper>\n      )}\n    </Root>\n  );\n};\n\nexport default MoviesList;\n","import { createGlobalStyle } from 'styled-components';\n\nconst GlobalStyle = createGlobalStyle`\n  * {\n    padding: 0;\n    margin: 0;\n  }\n`;\n\nexport default GlobalStyle;\n","import React, { useEffect, useState } from 'react';\n\nimport { apiUrl } from 'settings';\nimport MoviesList from 'components/MoviesList';\nimport GlobalStyle from 'global-styles';\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nexport const MoviesContext = React.createContext<any>([[], () => {}]);\n\nconst App: React.FunctionComponent = () => {\n  const [movies, setMovies] = useState([]);\n  const [loading, setLoading] = useState<boolean>(false);\n\n  useEffect(() => {\n    loadMovies();\n  }, []);\n\n  const loadMovies = async function (): Promise<void> {\n    setLoading(true);\n    try {\n      const data = await fetch(`${apiUrl}/all`);\n      const responseData = await data.json();\n      if (responseData) {\n        setMovies(() => responseData);\n      }\n    } catch (error) {\n      console.log('error', error);\n    }\n    setLoading(false);\n  };\n\n  return (\n    <MoviesContext.Provider value={{ loading, movies }}>\n      <MoviesList data-testid=\"app\" />\n      <GlobalStyle />\n    </MoviesContext.Provider>\n  );\n};\n\nexport default App;\n","import { DefaultTheme } from 'styled-components';\n\nexport interface CustomTheme extends DefaultTheme {\n  color: {\n    main: string;\n    greyBg: string;\n    error: string;\n    active: string;\n  };\n  zIndex: {\n    modal: number;\n  };\n  breakpoints: {\n    values: {\n      sm: number;\n      md: number;\n      lg: number;\n      xl: number;\n    };\n    up?: (key: keyof CustomTheme['breakpoints']['values']) => string;\n  };\n}\n\nexport const theme: CustomTheme = {\n  color: {\n    main: '#F0F2F5',\n    greyBg: '#F5F6FB',\n    error: '#EC4E4F',\n    active: '#65CC94',\n  },\n  zIndex: {\n    modal: 99999,\n  },\n  breakpoints: {\n    values: {\n      sm: 576,\n      md: 768,\n      lg: 991,\n      xl: 1200,\n    },\n    up: (key) => {\n      const value = theme.breakpoints.values[key];\n      return `@media all and (min-width: ${value}px)`;\n    },\n  },\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ThemeProvider } from 'styled-components';\n\nimport 'normalize.css';\nimport App from 'containers/App';\nimport { theme } from 'theme/theme';\n\nimport './styles.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <App />\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}