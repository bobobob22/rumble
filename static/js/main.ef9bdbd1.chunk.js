(this["webpackJsonprumble-app"]=this["webpackJsonprumble-app"]||[]).push([[0],{23:function(n,e,t){n.exports=t(36)},35:function(n,e,t){},36:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),i=t(15),c=t.n(i),o=t(2),u=(t(28),t(4)),s=t.n(u),l=t(5),d=t(7),m="https://simple-rumble-backend.herokuapp.com/movies",p=function(){var n=Object(l.a)(s.a.mark((function n(){var e,t;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("".concat(m,"/all"));case 3:return e=n.sent,n.next=6,e.json();case 6:return t=n.sent,n.abrupt("return",t);case 10:return n.prev=10,n.t0=n.catch(0),n.abrupt("return",n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}(),f=function(){var n=Object(l.a)(s.a.mark((function n(e,t){var r,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("".concat(m,"/reccomendations/").concat(e,"/").concat(t),{method:"PUT"});case 3:return r=n.sent,n.next=6,r.json();case 6:return a=n.sent,n.abrupt("return",a);case 10:return n.prev=10,n.t0=n.catch(0),n.abrupt("return",n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}(),v=a.a.createContext({loading:!1,movies:{movies:[]},updateMovie:f}),h=function(n){var e=n.children,t=Object(r.useState)({movies:[]}),i=Object(d.a)(t,2),c=i[0],o=i[1],u=Object(r.useState)(!1),m=Object(d.a)(u,2),h=m[0],b=m[1];Object(r.useEffect)((function(){g()}),[]);var g=function(){var n=Object(l.a)(s.a.mark((function n(){var e;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return b(!0),n.next=3,p();case 3:(e=n.sent)&&o((function(){return e})),b(!1);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return a.a.createElement(v.Provider,{value:{loading:h,movies:c,updateMovie:f}},e)},b=t(21),g=t(22),j=t(16),x=t(3),E=t(17);function O(){var n=Object(x.a)(["\n  cursor: pointer;\n"]);return O=function(){return n},n}var w=Object(o.c)(E.a)(O()),y=function(n){var e=n.icon,t=n.color,r=n.onClick;return a.a.createElement(w,{"data-testid":"button",icon:e,size:"3x",color:t,onClick:r})};function k(){var n=Object(x.a)(["\n  margin-top: 1rem;\n  font-style: italic;\n"]);return k=function(){return n},n}function S(){var n=Object(x.a)(["\n  display: flex;\n  justify-content: space-around;\n  width: 100%;\n  margin-top: auto;\n  margin-bottom: 30px;\n"]);return S=function(){return n},n}function C(){var n=Object(x.a)(["\n  width: 100%;\n"]);return C=function(){return n},n}function R(){var n=Object(x.a)(["\n  max-width: 200px;\n"]);return R=function(){return n},n}function M(){var n=Object(x.a)(["\n   text-align: center;\n   margin-top: 2rem;\n   margin-bottom: 1rem;\n   font-size: 1.2rem;\n"]);return M=function(){return n},n}function T(){var n=Object(x.a)(["\n  padding: 10px;\n  max-width: 90%;\n  height: 90%;\n  width: 100%;\n  border: 1px solid #000;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return T=function(){return n},n}function X(){var n=Object(x.a)(["\n  width: 100%;\n  max-width: 100%;\n  max-height: 100%;\n  height: 100vh;\n  background: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 0 auto;\n  \n  "," {\n    max-width: 500px;\n    max-height: 600px;\n  }\n"]);return X=function(){return n},n}var F=o.c.div(X(),(function(n){return n.theme.color.main}),(function(n){return n.theme.breakpoints.up("md")})),I=o.c.div(T()),L=o.c.h2(M()),N=o.c.div(R()),P=o.c.img(C()),U=o.c.div(S()),_=o.c.p(k()),z=Object(o.d)((function(n){var e=n.id,t=n.theme,r=n.imageURL,i=n.title,c=n.summary,o=n.rating,u=n.handleRejectMovie,s=n.handleAcceptMovie,l=n.handleSwipeLeft,d=n.handleSwipeRight,m=Object(j.a)({onSwipedLeft:function(){return l(e)},onSwipedRight:function(){return d(e)},preventDefaultTouchmoveEvent:!0,trackMouse:!0});return a.a.createElement(F,m,a.a.createElement(I,null,a.a.createElement(L,null,"".concat(i," ").concat(o," / 10")),a.a.createElement(N,null,a.a.createElement(P,{src:r,alt:i})),a.a.createElement(_,null,c),a.a.createElement(U,null,a.a.createElement(y,{icon:b.faTimesCircle,color:t.color.error,onClick:u}),a.a.createElement(y,{icon:g.faCheckCircle,color:t.color.active,onClick:s}))))})),B=t(6),V=function(n){var e=n.index,t=n.pos,r=n.numItems;return e-t<0?r-Math.abs(e-t):e-t},A={pos:0,sliding:!1,dir:"NEXT"};function J(n,e){switch(e.type){case"reset":return A;case"PREV":return Object(B.a)(Object(B.a)({},n),{},{dir:"PREV",sliding:!0,pos:n.pos===e.numItems-1?0:n.pos+1});case"NEXT":return Object(B.a)(Object(B.a)({},n),{},{dir:"NEXT",sliding:!0,pos:n.pos===e.numItems-1?0:n.pos+1});case"stopSliding":return Object(B.a)(Object(B.a)({},n),{},{sliding:!1});default:return n}}function D(){var n=Object(x.a)(["\n  flex: 1 0 100%;\n  flex-basis: 100%;\n  order: ",";\n"]);return D=function(){return n},n}function q(){var n=Object(x.a)(["\n  display: flex;\n  transition: ",";\n\n  transform: ",";\n"]);return q=function(){return n},n}function G(){var n=Object(x.a)(["\n  overflow: hidden;\n  width: 100%;\n"]);return G=function(){return n},n}function H(){var n=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n\n  "," {\n    max-width: 800px;\n    margin: 0 auto;\n    background: rgba(0,0,0,0.15);\n  }\n"]);return H=function(){return n},n}var K=o.c.div(H(),(function(n){return n.theme.breakpoints.up("md")})),Q=o.c.div(G()),W=o.c.div(q(),(function(n){return n.sliding?"none":"transform .3s ease-in"}),(function(n){return n.sliding?"NEXT"===n.dir?"translateX(calc(2 * (-100%)))":"translateX(0%)":"translateX(calc(-100%))"})),Y=o.c.div(D(),(function(n){return n.order})),Z=function(n){var e,t=Object(r.useContext)(v),i=t.loading,c=t.movies,o=t.updateMovie,u=null===c||void 0===c||null===(e=c.movies)||void 0===e?void 0:e.length,m=a.a.useReducer(J,A),p=Object(d.a)(m,2),f=p[0],h=p[1],b=Object(r.useState)(0),g=Object(d.a)(b,2),j=g[0],x=g[1],E=function(){var n=Object(l.a)(s.a.mark((function n(e,t){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o(e,t);case 2:n.sent&&console.log("updated");case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),O=function(n){k("PREV"),x((function(){return j+1})),E(n,"reject")},w=function(){k("stopSliding")},y=u&&u===j,k=function(n){h({type:n,numItems:u}),setTimeout((function(){h({type:"stopSliding"})}),50)};return i?a.a.createElement("p",null,"Movies are loading..."):u?a.a.createElement(K,{"data-testid":"movies-root"},y?a.a.createElement("p",{"data-testid":"no-response"},"There is no more movies in our database..."):a.a.createElement(Q,null,a.a.createElement(W,{dir:f.dir,sliding:f.sliding},u&&c.movies.map((function(n,e){return a.a.createElement(Y,{key:n._id,order:V({index:e,pos:f.pos,numItems:u})},a.a.createElement(z,{"data-testid":"movie",id:n._id,imageURL:n.imageURL,title:n.title,summary:n.summary,rating:n.rating,handleRejectMovie:function(){return O(n._id)},handleAcceptMovie:function(){return e=n._id,k("NEXT"),x((function(){return j+1})),void E(e,"accept");var e},handleSwipeLeft:O,handleSwipeRight:w}))}))))):null};function $(){var n=Object(x.a)(["\n  * {\n    padding: 0;\n    margin: 0;\n  }\n"]);return $=function(){return n},n}var nn=Object(o.b)($()),en=function(){return a.a.createElement(h,null,a.a.createElement(Z,{"data-testid":"app"}),a.a.createElement(nn,null))},tn={color:{main:"#F0F2F5",greyBg:"#F5F6FB",error:"#EC4E4F",active:"#65CC94"},zIndex:{modal:99999},breakpoints:{values:{sm:576,md:768,lg:991,xl:1200},up:function(n){var e=tn.breakpoints.values[n];return"@media all and (min-width: ".concat(e,"px)")}}};t(35);c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(o.a,{theme:tn},a.a.createElement(en,null))),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.ef9bdbd1.chunk.js.map